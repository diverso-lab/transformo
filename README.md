# Transformo: a tool for data transformation using SPL techniques

Transformo is a framework used as the basis for David Romero's Ph.D. thesis. Transformo is a framework with which you can perform migrations between relational databases using software product lines, obtaining custom SQL scripts compatible with each other.


## 1. Development Environment

### 1.1 Clone repo

```
git clone https://github.com/diverso-lab/transformo
cd transformo
```

### 1.2 Activate virtual environment

```
python -m venv venv
source venv/bin/activate
```

### 1.3. Install dependencies

```
pip install -r requirements.txt
```

## 2. Validation Environment (Drupal MySQL -> WordPress MySQL)

In this section we detail how to generate a Drupal instance with sample data as source system and an empty WordPress instance as target system to validate the migration functionality of the Transformo framework. 


### 2.1 Deployment with Docker 

We move to dp-to-wp
```
cd dp-to-wp
```

Now, we must deploy our Drupal and WordPress instances with Docker (one step at a time, in the order shown). First, we deploy our Drupal services:
```
make prepare_drupal
make install_drupal
```

The following commands will start our WordPress instances:
```
make prepare_wordpress
make install_wordpress
```

Thus, we have started a Drupal container populated with test data on port :8080 and a PHPMyAdmin instance on :8081, which will represent our source system. We have also started a configured and empty WordPress instance to represent our target, on port :8083 and its PHPMyAdmin on port :8084.

<div align="center">
  
|           | Web   | MySQL  | PHPMyAdmin | Credentials (Web /admin & PHPMyAdmin database access) |
|-----------|-------|--------|------------|-------------------------------------------------------|
| Drupal    | :8080 | :33061 | :8081      | user=drupal, password=drupal                          |
| WordPress | :8082 | :33062 | :8083      | user=wordpress, password=wordpress                    |
  
</div>

If you have already installed both Drupal and Wordpress, you can execute the following commands to up or down the corresponding containers:

```
make up
```

```
make down
```

### 2.2 Generating transformation scripts

All valid products of the transformation feature model can be generated by executing:

```
python test_application_engineering.py
```

These scripts are stored in the folder `workspaces/DW2/scripts`.

### 2.3 Testing transformation scripts

To test the scripts, let's first make backups of the Drupal and WordPress databases

If our computer is Linux, we install the mysql client

```
sudo apt-get install mysql-client
```

On the contrary, if our computer is macOS, we install it with the following command:

```
brew install mysql-client
```